<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
</head>
<!-- <ul id="friends"></ul> -->
<body>
  <div class="container">
    <table id="friends" class="table table-striped">
      <thead>
        <tr>
          <th>序号</th>
          <th>用户名</th>
          <th>家乡</th>
          <th>性别</th>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <div class="row">
        <form name="friendForm" id="friendForm">
            <div class="form-group">
              <label for="nameInput">姓名</label>
              <input type="text" class="form-control" name="nameInput" id="nameInput" required placeholder="请输入姓名">
            </div>
            <div class="form-group">
              <label for="hometownInput">家乡</label>
              <input type="text" class="form-control" name="hometownInput" id="hometownInput" required placeholder="请输入家乡">
            </div>
            <div class="checkbox">
              <label>
                <input type="radio" name="sex" checked="checked" value="男"> 男
              </label>
              <label>
                <input type="radio" name="sex" value="女"> 女
              </label>
            </div>
            <button type="submit" class="btn btn-default">添加</button>
          </form>    
    </div>
  </div>
  <script>
    
//   const friends = [{
//       name:'何江涛',
//       hometown:'石城',
//       sex:'男'
//   }];
//   window.localStorage.setItem('friends-info', JSON.stringify(friends))
  window.onload = function() {
    const oUL = document.querySelector('#friends tbody');
    document
        .forms['friendForm']
        .addEventListener('submit',(event) => {
            event.preventDefault();
            const name =document.forms['friendForm']['nameInput'].value;
            const hometown =document.forms['friendForm']['hometownInput'].value;
            const sex =document.forms['friendForm']['sex'].value;
            console.log(name,hometown,sex);
            let o = {name,hometown,sex};
            friends.push(o);
            localStorage.setItem('frindes-info',JSON.stringify(friends));
            oUL.innerHTML += rendeFriend(o,friends.length+1);
        })
    function rendeFriend(o,i) {
      return  `
        <tr>
          <th>${i}</th>
          <td>${o.name}</td>
          <td>${o.hometown}</td>
          <td>${o.sex}</td>
        </tr>`;
    }
    const friends = JSON.parse(localStorage.getItem('friends-info'));
    console.log(typeof friends);
    let i = 0;
    for (let friend  of friends) {
      i++
      oUL.innerHTML += rendeFriend(friend,i);
    }
  }
  </script>
</body>
</html>