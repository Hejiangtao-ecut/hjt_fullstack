# 网络协议
## TCP协议
1. UDP和TCP的区别
    1. 面向有连接。三次握手
    2. 分包传递
    3. 有流量控制，拥塞机制
    4. 头部信息
        - Seq：序列码，保证TCP传输的报文都是有序的，接收端可以通过顺序拼接报文
        - ACK：响应报文，接收端期望下一个字节的编码，同时也表示上一个序号的数据已经接收到了
        - window Size：表示传输路径大小，可以用于流量控制
2. 三次握手
    1. 由客户端向服务端发送报文，包含一个序列码，客户端进入SYN-SENT 状态
    2. 服务端接收到请求报文，同意则发送响应报文，包含响应码，和自身的序列码，进入侍服状态
    3. 客户端接收到服务器端的报文，然后向服务器端发送确认报文，客户端进入ESTABLISHED状态，此时连接建立成功
3. 为什么一定要三次握手，两次为什么不行
    1. 超时重连
    2. 事事有回应
    3. 当客户端发送一个连接请求，因为网络原因A请求超时，TCP有超时重传机制，TCP就会启动超时重传机制，重新发送请求B，服务端接收到B后进行应答，之后数据传递完成释放连接。
    假设此时A在两端关闭后又到达了服务端，那么此时服务端就会认为客户端又进行了请求，去响应，但是客户端已经关闭，然后服务端就会一直等待，造成资源浪费
4. 四次挥手
    1. 客户端数据处理完毕，发送释放连接的请求
    2. 服务器接收到释放连接的请求，告诉应用层该释放TCP连接，回应释放请求
        - 进入close wait 不在接收客户端的数据了，但是服务端还可以向客户端发送数据
    3. 服务器端把最后一条数据发送给客户端，自己进入last ACK状态
    4. 客户端接收到服务端的释放请求，向服务器端确认应答，自己进入time wait 状态 2MS，如果服务端没有再发送请求的话，就close
5. 为什么客户端为什么要进入time wait状态等待2ms
    1. 2ms是报文最长生存周期
    2. 为了保证服务端能接收到客户端的确认应答，如果没有接收到服务端会有一个超时重传机制，如果因为网络问题导致服务端没有接收到，会导致服务端无法关闭。
## UDP协议
1. UDP和TCP的区别
    1. UDP面向无连接，不需要在正式传输之前进行通信
        - TCP有三次握手，但是UDP是不需要的，且不会对数据进行包装
        - 在发送端，应用层将数据传递给传输层的UDP协议，UDP只负责给数据增加一个UDP标识，然后传递给网络层
        - 在接收层，网络层将数据传给传输层，UDP去除ID报文头，就传给应用层，不会进行任何拼接操作
    2. UDP只是数据报文的搬运工，不保证有序且不丢失的传递
        - 不可靠，体现在无连接上，接收到什么数据就直接传递什么数据，不会备份数据，发送数据也不会确认对方是否能接收到
        - UDP没有拥塞控制，一直会以一定的速度发送数据，即使网络不好，也不会进行调整(会导致包丢失)
        - 优点，高效，轻量
            - 传递熟读极快
            - 头部开销小，比tcp轻量(只有8字节)
        - 传输方式
            - 一对一、一对多、多对多
        - 适用场景
            - 直播、部分游戏(实时射击游戏)、
    3. UDP没有任何流量控制算法，相对TCP来说比较轻便
